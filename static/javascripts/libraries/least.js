/**
*** least.js 2
*** Author: Kamil Czujowski
*** Version: 2.1
*** love. hamburg. 2014 by Kamil Czujowski - All rights reserved.
*** http://kamilczujowski.de
**/
(function(e){e.fn.least=function(t){var n=e.extend({random:true,scrollToGallery:true,HiDPI:true},t);return this.each(function(){function t(t,n,r){var i=e('<span class="gallery-arrow-hide"></span>'),s=e('<img src="'+n+'"/>'),o=e("#least-hide"),u=e("li a");s.load(function(){if(r.length){t.html("<article>"+r+"</article>")}else{t.html("")}t.prepend(s).slideDown("slow");u.removeClass("load");o.find("span").remove();o.append(i)});i.on("click",function(){e(".least-preview").slideToggle("slow");u.removeClass("active");o.find("span").remove()})}e(this).find("li a").click(function(n){var r=e(this),i=r.attr("href"),s=e(".least-preview"),o=s.children("img"),u=r.attr("data-caption")||"";if(o.length&&i===o.attr("src")){s.slideToggle("slow");r.toggleClass("active");e("#least-hide").find("span").remove();return}if(o.length){r.addClass("active");e(".active").removeClass("active");s.slideUp("slow",function(){t(s,i,u)})}else{t(s,i,u)}r.addClass("load active")});if(n.random){e(".least-gallery").each(function(){var t=e(this),n=t.children("li");n.sort(function(){var e=parseInt(Math.random()*8,null),t=e%4,n=e>2?1:-1;return t*n}).appendTo(t)})}if(n.scrollToGallery){e(this).find("li a").click(function(t){t.preventDefault();e("html, body").animate({scrollTop:0},0)})}else{e(this).find("li a").click(function(e){e.preventDefault()})}if(n.HiDPI){if(window.devicePixelRatio>1){var r=e("#least img"),i=e("#least a");for(var s=0;s<r.length&&i.length;s++){var o=r[s].src,u=i[s].href,a=o.lastIndexOf("."),f=u.lastIndexOf(".");o=o.substr(0,a)+"@2x"+o.substr(a);u=u.substr(0,f)+"@2x"+u.substr(f);r[s].src=o;i[s].href=u}}}})}})(jQuery)